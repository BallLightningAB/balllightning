overview: "The memory-bank directory contains the core documentation and tracking files for the Ball Lightning AB company site. These files serve as the authoritative source for project roadmap, progress tracking, and version history in combination with https://github.com/users/BallLightningAB/projects/9 where all issues are tracked."

core_files:
  - name: "active-context.yaml"
    purpose: "Primary roadmap and progress tracking document"
    details:
      - "Contains current work items, deliverables, and detailed progress logs"
      - "Uses I{issue}D{deliverable} ID scheme for traceability (e.g., I3D1 = Issue #3 Deliverable 1)"
      - "Maintains remaining_deliverables sections to show outstanding work"
      - "Serves as the 'near-complete record of truth' for development progress"
    maintenance:
      - "Update progress_log entries as work is completed"
      - "Each progress_log entry includes covers: [...] array linking to deliverable IDs"
      - "Use generic tags (I3Docs, I3UI, I3Fix, I3Test, I3Biome) for work not tied to specific deliverables"
      - "Mark concatenated entries with [concatenated] when merging related small tasks"
      - "Update remaining_deliverables as items are completed"

  - name: "CHANGELOG.yaml"
    purpose: "Version history and release tracking"
    details:
      - "Tracks all version releases with dates, commits, and detailed change descriptions"
      - "Refs: lines include version, issue number, and relevant IxDy IDs for linkage"
      - "Maintains reverse chronological order (latest versions first)"
    maintenance:
      - "Add new entries for each version release"
      - "Extend Refs: lines with corresponding IxDy IDs from active-context.yaml"
      - "Include detailed bullet points describing all changes made"
      - "Keep version numbers synchronized with active-context.yaml meta.release"

  - name: "balllightning-pdd.yaml"
    purpose: "Project Design Document with technical specifications"
    details:
      - "Contains product definitions, technical stack, and architectural decisions"
      - "Serves as the canonical technical reference for the project"
    maintenance:
      - "Update when significant technical decisions or architectural changes occur"
      - "IMPORTANT: Always update the meta.version field in this file (not active-context.yaml)"
      - "Keep technical stack information current with actual implementation"
      - "Update product descriptions and domain information as needed"

version_management:
  synchronization:
    - "balllightning-pdd.yaml tracks its meta.version for documentation versioning"
    - "active-context.yaml tracks both the global meta.release for the current code version and the meta.pdd_version specifically for the PDD"
    - "update balllightning-pdd.yaml version when documentation changes, not code"

  id_scheme:
    format: "I{issue}D{n} = Deliverable n for GitHub issue #{issue}"
    examples:
      - "I3D1 = Issue #3 Deliverable 1"
      - "I1D4 = Issue #1 Deliverable 4"
    generic_tags:
      - "I3Docs = Documentation work"
      - "I3UI = UI polish/improvements"
      - "I3Fix = Minor fixes"
      - "I3Test = Test-related work"
      - "I3Biome = Biome/tooling configuration"

workflow_integration:
  progress_tracking_flow:
    - "Define deliverables in active-context.yaml with I{issue}D{n} prefixes"
    - "Work on deliverables, updating progress_log with covers: [...] arrays"
    - "Mark items in remaining_deliverables as completed"
    - "Create CHANGELOG.yaml entry for version release"
    - "Add relevant IxDy IDs to CHANGELOG Refs: lines"
    - "Update balllightning-pdd.yaml if technical specifications change"

  memory_bank_as_source:
    - "active-context.yaml provides complete progress narrative"
    - "CHANGELOG.yaml provides version-specific change summaries"
    - "balllightning-pdd.yaml provides technical foundation"
    - "Together they create comprehensive project documentation"

best_practices:
  content_quality:
    - "Maintain detailed progress_log entries - avoid over-compaction"
    - "Use clear, descriptive language in all entries"
    - "Ensure all deliverable IDs are properly referenced"
    - "Keep technical specifications accurate and up-to-date"

  file_integrity:
    - "Validate YAML syntax after changes"
    - "Ensure proper indentation and structure"
    - "Test ID references between files"
    - "Maintain consistent formatting across all memory-bank files"

  review_process:
    - "Review active-context.yaml progress completeness before releases"
    - "Verify CHANGELOG.yaml entries match actual changes made"
    - "Confirm balllightning-pdd.yaml reflects current technical state"
    - "Check version synchronization between files"

communication_guidelines:
  commit_messages:
    format: "type(scope): concise description"
    types:
      - "feat: new features/deliverables"
      - "fix: bug fixes"
      - "docs: documentation changes"
      - "refactor: code restructuring"
      - "test: testing work"
      - "chore: maintenance/tooling"
    scope_guidelines:
      - "Reference specific deliverables when possible: feat(site): implement blog detail pages (I3D6)"
      - "Include IxDy IDs for direct linkage: fix(typography): resolve dark mode prose colors (I3D1)"
      - "Use generic tags for broader work: chore(biome): update linting rules (I3Biome)"
    examples:
      - "feat(assets): implement logo SVG master and favicon set (I3D1, I3D2)"
      - "fix(meta): resolve site.webmanifest icon purpose fields (I3D6)"
      - "docs(memory-bank): update usage guide and version management"
      - "feat(portfolio): add Chronomation subpage with case study (I2D5)"
      - "test(og): validate OG image previews across social platforms (I3D11)"

  github_issue_updates:
    progress_updates:
      - "Reference completed deliverables with IxDy IDs"
      - "Link to specific progress_log entries from active-context.yaml"
      - "Mention any new deliverables added during development"
    status_reporting:
      - "Use remaining_deliverables to show what's left"
      - "Reference concatenated entries when appropriate"
      - "Cross-reference related issues or dependencies"
    update_templates:
      progress_summary: |
        Completed deliverables: I3D1, I3D2, I3D4
        Remaining: I3D10, I3D11
      key_changes: |
        - Implemented theme provider with dark/light/system modes (I3D2)
        - Created shared layout components (I3D4)
        - See active-context.yaml progress_log for detailed breakdown
      next_steps: |
        - Focus on newsletter integration (I3D10)
        - SEO configuration (I3D11)

  github_labels:
    - name: "type: question"
      description: "Further information is requested"
      color: "#d876e3"
    - name: "wontfix"
      description: "This will not be worked on"
      color: "#ffffff"
    - name: "type: bug"
      description: "Defect in existing behavior"
      color: "#D73A4A"
    - name: "type: feature"
      description: "New capability"
      color: "#A2EEEF"
    - name: "type: chore"
      description: "Maintenance/cleanup"
      color: "#CFDFE1"
    - name: "type: docs"
      description: "Documentation work"
      color: "#0075CA"
    - name: "type: refactor"
      description: "Code restructuring"
      color: "#FBCA04"
    - name: "type: test"
      description: "Testing/QA"
      color: "#5319E7"
    - name: "area: frontend"
      description: "UI and client application"
      color: "#1D76DB"
    - name: "type: security"
      description: "Security-related work"
      color: "#B60205"
    - name: "area: api"
      description: "Server/API endpoints"
      color: "#0E8A16"
    - name: "area: db"
      description: "Database and schema"
      color: "#006B75"
    - name: "area: web3"
      description: "On-chain, wallets, RPC"
      color: "#5319E7"
    - name: "area: infra"
      description: "Infra/ops/config"
      color: "#BFD4F2"
    - name: "area: ci"
      description: "CI/CD and automation"
      color: "#5EBEFF"
    - name: "breaking-change"
      description: "Breaking API/contract change"
      color: "#5319E7"
    - name: "needs-triage"
      description: "New/ungroomed"
      color: "#FEF2C0"
    - name: "area: documentation"
      description: "Documentation area (guides, README, specs)"
      color: "#0366D6"
    - name: "area: research-and-planning"
      description: "Discovery, research spikes, planning, PDD/specs"
      color: "#C5DEF5"
    - name: "type: dependency"
      description: ""
      color: "#cdd646"

  workflow_integration:
    - "Commit messages should reference the deliverables they implement"
    - "Issue updates should mirror the structure in active-context.yaml"
    - "Pull request descriptions should include relevant IxDy IDs"
    - "Use memory-bank files as the source of truth for all project communication"

sub_issue_management:
  structure:
    description: "For tracking related work under a parent issue, use the sub_issues array"
    example:
      sub_issues:
        - id: "descriptive-sub-issue-id"
          issue: "#4"
          title: "Brief descriptive title"
          status: "done|in-progress|planned"
          links:
            issue: "https://github.com/BallLightningAB/balllightning/issues/4"

  when_to_use:
    appropriate_for:
      - "Organizational or documentation tasks that support a main issue"
      - "Separate but related work that doesn't fit into the main deliverable structure"
      - "Cross-cutting concerns (like tooling upgrades, process improvements)"
      - "Work that needs its own issue tracking but is logically part of a parent effort"

  sub_issue_vs_deliverable:
    use_sub_issues_when:
      - "The work requires separate GitHub issue tracking"
      - "The task has its own lifecycle independent of parent deliverables"
      - "The work spans multiple areas or affects multiple parent deliverables"
    use_deliverables_when:
      - "The work is a direct component of the main issue"
      - "The task fits naturally into the parent issue's scope"
      - "The work can be tracked with the parent issue's I{issue}D{n} scheme"

  documentation_guidelines:
    - "Sub-issues maintain their own I{issue}D{n} deliverable scheme (e.g., I4D1, I4D2)"
    - "Parent issue progress_log can reference sub-issue completion using generic tags"
    - "Sub-issues should be linked from the parent issue for visibility"
    - "Update the parent issue's sub_issues array when sub-issues are created or completed"

  lifecycle_management:
    sub_issue_completion:
      - "Simple sub-issues (like organizational tasks) can just update status to 'done'"
      - "Complex sub-issues with their own deliverables should be moved to recent_done with full structure"
      - "Parent issue progress_log can include entries like: covers: [I3Docs] note: 'Completed sub-issue #4: memory-bank organizational upgrade'"
    progress_tracking:
      - "Sub-issues maintain their own progress_log for detailed tracking"
      - "Parent issue progress_log can reference major sub-issue milestones"
      - "Use generic tags (I3Docs, I3UI) when sub-issue work supports parent deliverables"
      - "Keep detailed progress within the sub-issue, summary references in parent"

  example_usage:
    parent_issue:
      description: "Parent issue (#3) - main implementation"
      sub_issues:
        - id: "memory-bank-organizational-upgrade"
          issue: "#4"
          title: "docs(memory-bank): implement ID-based tracking system"
          status: "done"
    sub_issue:
      description: "Sub-issue (#4) - has its own deliverables"
      deliverables:
        - "[I4D1] Refactor active-context.yaml ID scheme"
        - "[I4D2] Create memory-bank-usage.yaml"
